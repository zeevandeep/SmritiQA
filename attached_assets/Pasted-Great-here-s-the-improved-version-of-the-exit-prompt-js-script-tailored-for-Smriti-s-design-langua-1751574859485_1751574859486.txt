Great â€” here's the improved version of the exit-prompt.js script tailored for Smritiâ€™s design language:

ğŸ¨ Styled Toast for Smriti (orange theme, clean typography)
javascript
Copy
Edit
let backPressedOnce = false;
let backToastTimer = null;

// Push dummy history state when page loads
window.addEventListener('load', () => {
    history.pushState(null, '', location.href);
});

window.addEventListener('popstate', (event) => {
    if (backPressedOnce) {
        // Second back press within timeout
        if (window.matchMedia('(display-mode: standalone)').matches) {
            window.close(); // For PWA mode (Android only)
        } else {
            history.go(-2); // Tries to exit web session
        }
    } else {
        backPressedOnce = true;
        showExitToast();

        history.pushState(null, '', location.href); // Re-push dummy state

        backToastTimer = setTimeout(() => {
            backPressedOnce = false;
        }, 2000); // 2 seconds to tap again
    }
});

// Cancel prompt if user interacts again
['click', 'touchstart', 'keydown'].forEach(eventType => {
    window.addEventListener(eventType, () => {
        clearTimeout(backToastTimer);
        backPressedOnce = false;
    });
});

// Styled exit toast for Smriti (orange, minimal, centered)
function showExitToast() {
    let toast = document.getElementById('exit-toast');
    if (!toast) {
        toast = document.createElement('div');
        toast.id = 'exit-toast';
        toast.innerText = 'Press back again to exit Smriti';
        toast.style.position = 'fixed';
        toast.style.bottom = '70px';
        toast.style.left = '50%';
        toast.style.transform = 'translateX(-50%)';
        toast.style.background = '#FF6F00';  // Smriti's orange tone
        toast.style.color = '#fff';
        toast.style.padding = '12px 24px';
        toast.style.borderRadius = '999px';
        toast.style.boxShadow = '0 4px 10px rgba(0,0,0,0.12)';
        toast.style.fontFamily = 'Inter, sans-serif';
        toast.style.fontWeight = '500';
        toast.style.fontSize = '14px';
        toast.style.letterSpacing = '0.3px';
        toast.style.zIndex = '9999';
        toast.style.opacity = '0';
        toast.style.transition = 'opacity 0.3s ease-in-out';
        document.body.appendChild(toast);
    }

    toast.style.opacity = '1';
    setTimeout(() => {
        toast.style.opacity = '0';
    }, 1800);
}
âœ… Integration
Save as /static/js/exit-prompt.js

Include in your partials/navbar.html or base layout:

html
Copy
Edit
<script src="/static/js/exit-prompt.js"></script>
ğŸ“± Behavior Recap
First back press (on any page): shows orange toast: â€œPress back again to exit Smritiâ€

Second back press (within 2 seconds): exits app

Works in PWA or regular browser

Responsive, styled to match Smritiâ€™s soft, elegant UX